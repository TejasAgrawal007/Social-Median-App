<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../stylesheets/style.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <main class="min-h-screen w-full bg-zinc-900 p-10 text-white">

        <div class="w-full flex justify-end">
          <a class="bg-red-500 px-4 py-2  rounded-lg font-semibold" href="/logout">Logout</a>
        </div>

            <h1 class="tracking-tighter mb-3 text-white font-semibold shadow-sm text-3xl" >Hello, <%= user.name %> ðŸ‘‹</h1>
           <h5>You can Create a New Post</h5>

            <form action="./post" method="post">

                <textarea placeholder="what's your mind ?" class="w-1/3 mt-3 p-4 rounded-md block outline-none border-2 resize-none border-zinc-800 bg-transparent" name="content"></textarea>
                <input class="px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 font-semibold text-sm block mt-3" type="submit" value="Create New Post">
            </form>

            <div class="mt-20">
              <h2 class="text-zinc-400 text-2xl">Your Posts</h2>

              
              <div class="postcontainer mt-5 text-slate-400 ">

              <% user.posts.reverse().forEach(function(post){ %>
                  <div class="bg-zinc-800 w-1/3 p-4 rounded-lg mb-5">
                    <h4 class="text-blue-500">@<%= user.username %></h4>
                    <p class="tracking-tight text-sm"><%= post.content %></p>
                    <small><%= post.likes.length %> likes</small>
                    <div class="btn flex gap-3 mt-5">
                      <a class="text-blue-400 font-semibold" href="/like/<%=  post._id %>">
                        <%= post.likes.indexOf(user._id) === -1 ? "Like" : "Unline"  %>
                      </a>
                      <a href="/edit/<%= post._id %>">edit</a>
                    </div>
                    
                  </div>
                  <% }) %>


              </div>

            </div>



    </main>
</body>
</html>